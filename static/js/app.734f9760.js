(function(e){function t(t){for(var o,n,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],o=!0,n=1;n<i.length;n++){var r=i[n];0!==s[r]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var o={},n={app:0},s={app:0},a=[];function r(e){return l.p+"static/js/"+({"select-user":"select-user",workflow:"workflow"}[e]||e)+"."+{"select-user":"31ef7260",workflow:"0ffe3df7"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={workflow:1};n[e]?t.push(n[e]):0!==n[e]&&i[e]&&t.push(n[e]=new Promise((function(t,i){for(var o="static/css/"+({"select-user":"select-user",workflow:"workflow"}[e]||e)+"."+{"select-user":"31d6cfe0",workflow:"b1c88566"}[e]+".css",s=l.p+o,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var c=a[r],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===s))return t()}var p=document.getElementsByTagName("style");for(r=0;r<p.length;r++){c=p[r],d=c.getAttribute("data-href");if(d===o||d===s)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var o=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete n[e],u.parentNode.removeChild(u),i(a)},u.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(u)})).then((function(){n[e]=0})));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,i){o=s[e]=[t,i]}));t.push(o[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(e);var p=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(u);var i=s[e];if(0!==i){if(i){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",p.name="ChunkLoadError",p.type=o,p.request=n,i[1](p)}s[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(i,o,function(t){return e[t]}.bind(null,o));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var u=d;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0109":function(e,t,i){"use strict";i("25f8")},1136:function(e,t,i){},"19bb":function(e,t,i){"use strict";i("3487")},"25f8":function(e,t,i){},"2ab7":function(e,t,i){"use strict";i("8ebe")},3487:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],a={name:"App",data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},r=a,l=(i("5c0b"),i("2877")),c=Object(l["a"])(r,n,s,!1,null,null,null),d=c.exports,p=(i("d3b7"),i("3ca3"),i("ddb0"),i("8c4f"));o["default"].use(p["a"]);var u=[{path:"/",redirect:"/workflow"},{path:"/workflow",name:"Workflow",component:function(){return i.e("workflow").then(i.bind(null,"b36a"))}},{path:"/select-user",name:"SelectUser",component:function(){return i.e("select-user").then(i.bind(null,"78cf"))}}],f=new p["a"]({mode:"history",base:"/",routes:u}),h=f,v=i("2f62");o["default"].use(v["a"]);var m=new v["a"].Store({state:{},mutations:{},actions:{},modules:{}}),g=i("5c96"),C=i.n(g),b=(i("0fae"),i("99af"),i("159b"),i("b0c0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",e._g({class:e.svgClass,attrs:{"aria-hidden":"true"}},e.$listeners),[i("use",{attrs:{"xlink:href":e.iconName}})])}),y=[],_=(i("9edf"),{name:"svg-icon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{iconName:function(){return"#icon-".concat(this.iconClass)},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}}),k=_,L=(i("2ab7"),Object(l["a"])(k,b,y,!1,null,"e1bc85c8",null)),N=L.exports;N.install=function(e){e.component(N.name,N)};var w=N,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"process-config"},[i("div",{staticClass:"zoom"},[i("div",{class:"zoom-out"+(50===e.nowVal?" disabled":""),on:{click:function(t){return e.zoomSize(1)}}},[i("i",{staticClass:"el-icon-minus"})]),i("span",[e._v(e._s(e.nowVal)+"%")]),i("div",{class:"zoom-in"+(300===e.nowVal?" disabled":""),on:{click:function(t){return e.zoomSize(2)}}},[i("i",{staticClass:"el-icon-plus"})])]),i("div",{staticClass:"scale-box",style:"transform: scale("+e.nowVal/100+"); transform-origin: 50% 0px 0px;",attrs:{id:"scale-box"}},[i("node-wrap",{attrs:{"node-config":e.nodeConfig,"is-tried":e.isTried,conditions:e.conditionsList,"director-max-level":e.directorMaxLevel},on:{"update:nodeConfig":function(t){e.nodeConfig=t},"update:node-config":function(t){e.nodeConfig=t},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}),e._m(0)],1)])},S=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"end-node"},[i("div",{staticClass:"end-node-circle"}),i("div",{staticClass:"end-node-text"},[e._v("流程结束")])])}],U=(i("d81d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["router"!==e.nodeConfig.type?i("div",{staticClass:"node-wrap"},[i("div",{staticClass:"node-wrap-box",class:("start"===e.nodeConfig.type?"start-node ":"")+(e.isTried&&e.nodeConfig.error?"active error":"")},[i("div",{staticClass:"start-title",style:e.startTitleStyle},[i("span",{directives:[{name:"show",rawName:"v-show",value:"approver"===e.nodeConfig.type,expression:"nodeConfig.type === 'approver'"}],staticClass:"iconfont el-icon-s-check"}),i("span",{directives:[{name:"show",rawName:"v-show",value:"copy"===e.nodeConfig.type,expression:"nodeConfig.type === 'copy'"}],staticClass:"iconfont el-icon-s-promotion"}),e.isInput?e._e():i("span",{class:"editable-title "+e.nodeConfig.type,on:{click:function(t){return e.clickEvent()}}},[e._v(e._s(e.nodeConfig.nodeName))]),e.isInput?i("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeConfig.nodeName,expression:"nodeConfig.nodeName"},{name:"focus",rawName:"v-focus"}],staticClass:"el-input__inner",attrs:{type:"text"},domProps:{value:e.nodeConfig.nodeName},on:{blur:function(t){return e.blurEvent()},focus:function(e){return e.currentTarget.select()},input:function(t){t.target.composing||e.$set(e.nodeConfig,"nodeName",t.target.value)}}}):e._e(),"start"!==e.nodeConfig.type?i("i",{staticClass:"iconfont el-icon-close",on:{click:function(t){return e.delNode()}}}):e._e()]),i("div",{staticClass:"content",on:{click:e.setPerson}},["start"===e.nodeConfig.type?i("div",{staticClass:"text"},[e._v(" "+e._s(e.startStr(e.nodeConfig)||"所有人")+" ")]):e._e(),"approver"===e.nodeConfig.type?i("div",{staticClass:"text"},[i("span",{staticClass:"placeholder"},[e._v(e._s(e.setApproverStr(e.nodeConfig)||"请选择"))])]):e._e(),"copy"===e.nodeConfig.type?i("div",{staticClass:"text"},[i("span",{staticClass:"placeholder"},[e._v(e._s(e.copyerStr(e.nodeConfig)||"请选择"))])]):e._e(),i("i",{staticClass:"iconfont arrow el-icon-arrow-right"})]),e.isTried&&e.nodeConfig.error?i("div",{staticClass:"error_tip"},[i("i",{staticClass:"el-icon-warning-outline",staticStyle:{color:"rgb(242, 86, 67)"}})]):e._e()]),i("add-node",{attrs:{"child-node-p":e.nodeConfig.childNode},on:{"update:childNodeP":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:child-node-p":function(t){return e.$set(e.nodeConfig,"childNode",t)}}})],1):e._e(),"router"===e.nodeConfig.type?i("div",{staticClass:"branch-wrap"},[i("div",{staticClass:"branch-box-wrap"},[i("div",{staticClass:"branch-box"},[i("button",{staticClass:"add-branch",on:{click:e.addTerm}},[e._v("添加条件")]),e._l(e.nodeConfig.conditionNodes,(function(t,o){return i("div",{key:o,staticClass:"col-box"},[i("div",{staticClass:"condition-node"},[i("div",{staticClass:"condition-node-box"},[i("div",{staticClass:"auto-judge",class:e.isTried&&t.error?"error active":""},[0!==o?i("div",{staticClass:"sort-left",on:{click:function(t){return e.arrTransfer(o,-1)}}},[e._v("<")]):e._e(),i("div",{staticClass:"title-wrapper"},[e.isInputList[o]?i("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeName,expression:"item.nodeName"},{name:"focus",rawName:"v-focus"}],staticClass:"el-input__inner",domProps:{value:t.nodeName},on:{blur:function(t){return e.blurEvent(o)},focus:function(e){return e.currentTarget.select()},input:function(i){i.target.composing||e.$set(t,"nodeName",i.target.value)}}}):e._e(),e.isInputList[o]?e._e():i("span",{staticClass:"editable-title",on:{click:function(t){return e.clickEvent(o)}}},[e._v(e._s(t.nodeName))]),i("span",{staticClass:"priority-title",on:{click:function(i){return e.setPerson(t.priorityLevel)}}},[e._v("优先级"+e._s(t.priorityLevel))]),i("i",{staticClass:"iconfont el-icon-close",on:{click:function(t){return e.delTerm(o)}}})]),o!==e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"sort-right",on:{click:function(t){return e.arrTransfer(o)}}},[e._v(">")]):e._e(),i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.conditionStr(t,o))},on:{click:function(i){return e.setPerson(t.priorityLevel)}}}),e.isTried&&t.error?i("div",{staticClass:"error_tip"},[i("i",{staticClass:"el-icon-warning-outline",staticStyle:{color:"rgb(242, 86, 67)"}})]):e._e()]),i("add-node",{attrs:{"child-node-p":t.childNode},on:{"update:childNodeP":function(i){return e.$set(t,"childNode",i)},"update:child-node-p":function(i){return e.$set(t,"childNode",i)}}})],1)]),t.childNode&&t.childNode?i("node-wrap",{attrs:{"node-config":t.childNode,"is-tried":e.isTried,conditions:e.conditions,"director-max-level":e.directorMaxLevel},on:{"update:nodeConfig":function(i){return e.$set(t,"childNode",i)},"update:node-config":function(i){return e.$set(t,"childNode",i)},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}):e._e(),0===o?i("div",{staticClass:"top-left-cover-line"}):e._e(),0===o?i("div",{staticClass:"bottom-left-cover-line"}):e._e(),o===e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"top-right-cover-line"}):e._e(),o===e.nodeConfig.conditionNodes.length-1?i("div",{staticClass:"bottom-right-cover-line"}):e._e()],1)}))],2),i("add-node",{attrs:{"child-node-p":e.nodeConfig.childNode},on:{"update:childNodeP":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:child-node-p":function(t){return e.$set(e.nodeConfig,"childNode",t)}}})],1)]):e._e(),i("el-drawer",{attrs:{title:"发起人",visible:e.promoterDrawer,"wrapper-closable":!1,"custom-class":"set-promoter-drawer",size:"550px","append-to-body":""},on:{"update:visible":function(t){e.promoterDrawer=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"promoter_content drawer_content"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addPromoter}},[e._v("添加/修改发起人")]),e.startConfig.nodeUserList&&e.startConfig.nodeUserList.length>0?i("p",{staticClass:"selected_list"},[e._l(e.startConfig.nodeUserList,(function(t,o){return i("span",{key:o},[e._v(" "+e._s(t.label)+" "),i("span",{staticClass:"el-icon-close",on:{click:function(t){return e.removeEle(e.startConfig.nodeUserList,o)}}})])})),i("a",{on:{click:function(t){e.startConfig.nodeUserList=[]}}},[e._v("清除")])],2):i("p",{staticClass:"selected_list"},[e._v("所有人")])],1),i("div",{staticClass:"demo-drawer__footer clearfix"},[i("el-button",{attrs:{type:"primary"},on:{click:e.savePromoter}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.promoterDrawer=!1}}},[e._v("取 消")])],1),i("el-dialog",{attrs:{title:"选择成员",visible:e.promoterVisible,width:"600px","close-on-click-modal":!1,"append-to-body":"","custom-class":"set-promoter-dialog"},on:{"update:visible":function(t){e.promoterVisible=t}}},[i("div",{staticClass:"person_body clearfix"},[i("div",{staticClass:"person_tree fl"},[i("el-input",{attrs:{type:"text",size:"mini",placeholder:"搜索成员"},on:{input:function(t){return e.getDebounceData(t,e.activeName)}},model:{value:e.promoterSearchName,callback:function(t){e.promoterSearchName=t},expression:"promoterSearchName"}}),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"人员列表",name:"1"}}),i("el-tab-pane",{attrs:{label:"角色列表",name:"2"}}),i("el-tab-pane",{attrs:{label:"部门列表",name:"3"}})],1),i("div",{staticClass:"person_list"},["1"===e.activeName?i("el-checkbox-group",{model:{value:e.promoterUserChecked,callback:function(t){e.promoterUserChecked=t},expression:"promoterUserChecked"}},e._l(e.userList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.checkedUserList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-user"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e(),"2"===e.activeName?i("el-checkbox-group",{model:{value:e.promoterRoleChecked,callback:function(t){e.promoterRoleChecked=t},expression:"promoterRoleChecked"}},e._l(e.roleList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.checkedRoleList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e(),"3"===e.activeName?i("el-checkbox-group",{model:{value:e.promoterDeptChecked,callback:function(t){e.promoterDeptChecked=t},expression:"promoterDeptChecked"}},e._l(e.deptList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.checkedDeptList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e()],1)],1),i("div",{staticClass:"has_selected fl"},[i("p",{staticClass:"clearfix"},[e._v(" 已选（"+e._s(e.checkedDeptList.length+e.checkedRoleList.length+e.checkedUserList.length)+"） "),i("a",{on:{click:e.emptyPromoter}},[e._v("清空")])]),i("ul",[e._l(e.checkedDeptList,(function(t,o){return i("li",{key:o+"d"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.checkedDeptList,o)}}})])})),e._l(e.checkedRoleList,(function(t,o){return i("li",{key:o+"r"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.checkedRoleList,o)}}})])})),e._l(e.checkedUserList,(function(t,o){return i("li",{key:o+"g"},[i("span",{staticClass:"icon el-icon-user"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.checkedUserList,o)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.promoterVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.surePromoter}},[e._v("确 定")])],1)])],1)]),i("el-drawer",{attrs:{title:"审批人设置",visible:e.approverDrawer,"wrapper-closable":!1,"custom-class":"set-promoter-drawer",size:"550px","append-to-body":""},on:{"update:visible":function(t){e.approverDrawer=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"drawer_content"},[i("div",{staticClass:"approver_content"},[i("el-radio-group",{staticClass:"clearfix",on:{change:e.changeType},model:{value:e.approverConfig.setType,callback:function(t){e.$set(e.approverConfig,"setType",t)},expression:"approverConfig.setType"}},[i("el-radio",{attrs:{label:1}},[e._v("指定成员")]),i("el-radio",{attrs:{label:2}},[e._v("主管")]),i("el-radio",{attrs:{label:4}},[e._v("发起人自选")])],1)],1),1===e.approverConfig.setType?i("div",{staticClass:"specify_member"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]),e.approverConfig.nodeUserList&&e.approverConfig.nodeUserList.length>0?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,o){return i("span",{key:o},[e._v(" "+e._s(t.label)+" "),i("span",{staticClass:"el-icon-close",on:{click:function(t){return e.removeEle(e.approverConfig.nodeUserList,o)}}})])})),i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")])],2):e._e()],1):e._e(),2===e.approverConfig.setType?i("div",{staticClass:"approver_manager"},[i("p",[i("span",[e._v("发起人的：")]),i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.approverConfig.directorLevel,callback:function(t){e.$set(e.approverConfig,"directorLevel",t)},expression:"approverConfig.directorLevel"}},e._l(e.directorMaxLevel,(function(e){return i("el-option",{key:e,attrs:{label:1===e?"直接主管":"第"+e+"级主管",value:e}})})),1)],1),i("p",{staticClass:"tip"},[e._v("找不到主管时，由上级主管代审批")])]):e._e(),4===e.approverConfig.setType?i("div",{staticClass:"approver_self_select"},[i("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.changeModeOrRange},model:{value:e.approverConfig.selectMode,callback:function(t){e.$set(e.approverConfig,"selectMode",t)},expression:"approverConfig.selectMode"}},[i("el-radio",{attrs:{label:1}},[e._v("选一个人")]),i("el-radio",{attrs:{label:2}},[e._v("选多个人")])],1),i("h3",[e._v("选择范围")]),i("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.changeModeOrRange},model:{value:e.approverConfig.selectRange,callback:function(t){e.$set(e.approverConfig,"selectRange",t)},expression:"approverConfig.selectRange"}},[i("el-radio",{attrs:{label:1}},[e._v("全公司")]),i("el-radio",{attrs:{label:2}},[e._v("指定成员")])],1),2===e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]):e._e(),3===e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addRoleApprover}},[e._v("添加/修改角色")]):e._e(),2===e.approverConfig.selectRange||3===e.approverConfig.selectRange?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,o){return i("span",{key:o},[e._v(" "+e._s(t.label)+" "),i("span",{staticClass:"el-icon-close",on:{click:function(t){return e.removeEle(e.approverConfig.nodeUserList,o)}}})])})),e.approverConfig.nodeUserList.length>0?i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2):e._e()],1):e._e(),1===e.approverConfig.setType&&e.approverConfig.nodeUserList.length>1||4===e.approverConfig.setType&&2===e.approverConfig.selectMode?i("div",{staticClass:"approver_some"},[i("p",[e._v("多人审批时采用的审批方式")]),i("el-radio-group",{staticClass:"clearfix",model:{value:e.approverConfig.examineMode,callback:function(t){e.$set(e.approverConfig,"examineMode",t)},expression:"approverConfig.examineMode"}},[i("el-radio",{attrs:{label:1}},[e._v("依次审批")]),2!==e.approverConfig.setType?i("el-radio",{attrs:{label:2}},[e._v("会签（须所有审批人同意）")]):e._e(),2!==e.approverConfig.setType?i("el-radio",{attrs:{label:3}},[e._v("或签（一名审批人同意或拒绝即可）")]):e._e()],1)],1):e._e()]),i("div",{staticClass:"demo-drawer__footer clearfix"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveApprover}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.approverDrawer=!1}}},[e._v("取 消")])],1),i("el-dialog",{attrs:{title:"选择成员",visible:e.approverVisible,width:"600px","close-on-click-modal":!1,"append-to-body":"","custom-class":"set-promoter-dialog"},on:{"update:visible":function(t){e.approverVisible=t}}},[i("div",{staticClass:"person_body clearfix"},[i("div",{staticClass:"person_tree fl"},[i("el-input",{attrs:{type:"text",size:"mini",placeholder:"搜索成员"},on:{input:function(t){return e.getDebounceData(t,e.activeName)}},model:{value:e.approverSearchName,callback:function(t){e.approverSearchName=t},expression:"approverSearchName"}}),i("div",{staticClass:"person_list"},[i("el-checkbox-group",{model:{value:e.approverUserChecked,callback:function(t){e.approverUserChecked=t},expression:"approverUserChecked"}},e._l(e.userList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.approverUserList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-user"}),e._v(" "+e._s(t.label)+" ")])])})),1)],1)],1),i("div",{staticClass:"has_selected fl"},[i("p",{staticClass:"clearfix"},[e._v(" 已选（"+e._s(e.approverUserList.length)+"） "),i("a",{on:{click:e.emptyApprover}},[e._v("清空")])]),i("ul",e._l(e.approverUserList,(function(t,o){return i("li",{key:o+"f"},[i("span",{staticClass:"icon el-icon-user"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.approverUserList,o)}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"选择角色",visible:e.approverRoleVisible,width:"600px","close-on-click-modal":!1,"append-to-body":"","custom-class":"set-promoter-dialog"},on:{"update:visible":function(t){e.approverRoleVisible=t}}},[i("div",{staticClass:"person_body clearfix"},[i("div",{staticClass:"person_tree fl"},[i("el-input",{attrs:{type:"text",size:"mini",placeholder:"搜索角色"},on:{input:function(t){return e.getDebounceData(t,2)}},model:{value:e.approverSearchName,callback:function(t){e.approverSearchName=t},expression:"approverSearchName"}}),i("div",{staticClass:"person_list"},[i("el-checkbox-group",{model:{value:e.approverRoleChecked,callback:function(t){e.approverRoleChecked=t},expression:"approverRoleChecked"}},e._l(e.roleList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.approverRoleList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1)],1)],1),i("div",{staticClass:"has_selected fl"},[i("p",{staticClass:"clearfix"},[e._v(" 已选（"+e._s(e.approverRoleList.length)+"） "),i("a",{on:{click:e.emptyRole}},[e._v("清空")])]),i("ul",e._l(e.approverRoleList,(function(t,o){return i("li",{key:o+"f"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.approverRoleList,o)}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverRoleVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)])],1)]),i("el-drawer",{attrs:{title:"抄送人设置",visible:e.copyerDrawer,"wrapper-closable":!1,"custom-class":"set-copyer-drawer",size:"550px","append-to-body":""},on:{"update:visible":function(t){e.copyerDrawer=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"copyer_content drawer_content"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addCopyer}},[e._v("添加成员")]),i("p",{staticClass:"selected_list"},[e._l(e.copyerConfig.nodeUserList,(function(t,o){return i("span",{key:o},[e._v(" "+e._s(t.label)+" "),i("span",{staticClass:"el-icon-close",on:{click:function(t){return e.removeEle(e.copyerConfig.nodeUserList,o)}}})])})),e.copyerConfig.nodeUserList&&e.copyerConfig.nodeUserList.length>0?i("a",{on:{click:function(t){e.copyerConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2),i("el-checkbox-group",{staticClass:"clearfix",model:{value:e.ccSelfSelectFlag,callback:function(t){e.ccSelfSelectFlag=t},expression:"ccSelfSelectFlag"}},[i("el-checkbox",{attrs:{label:1}},[e._v("允许发起人自选抄送人")])],1)],1),i("div",{staticClass:"demo-drawer__footer clearfix"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveCopyer}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.copyerDrawer=!1}}},[e._v("取 消")])],1),i("el-dialog",{attrs:{title:"选择成员",visible:e.copyerVisible,width:"600px","close-on-click-modal":!1,"append-to-body":"","custom-class":"set-promoter-dialog"},on:{"update:visible":function(t){e.copyerVisible=t}}},[i("div",{staticClass:"person_body clearfix"},[i("div",{staticClass:"person_tree fl"},[i("el-input",{attrs:{type:"text",size:"mini",placeholder:"搜索成员"},on:{input:function(t){return e.getDebounceData(t,e.activeName)}},model:{value:e.copyerSearchName,callback:function(t){e.copyerSearchName=t},expression:"copyerSearchName"}}),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"人员列表",name:"1"}}),i("el-tab-pane",{attrs:{label:"部门列表",name:"3"}})],1),i("div",{staticClass:"person_list"},["1"===e.activeName?i("el-checkbox-group",{model:{value:e.copyerUserChecked,callback:function(t){e.copyerUserChecked=t},expression:"copyerUserChecked"}},e._l(e.userList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.copyerUserList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-user"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e(),"3"===e.activeName?i("el-checkbox-group",{model:{value:e.copyerDeptChecked,callback:function(t){e.copyerDeptChecked=t},expression:"copyerDeptChecked"}},e._l(e.deptList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.copyerDeptList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e()],1)],1),i("div",{staticClass:"has_selected fl"},[i("p",{staticClass:"clearfix"},[e._v(" 已选（"+e._s(e.copyerUserList.length+e.copyerDeptList.length)+"） "),i("a",{on:{click:e.emptyCopyer}},[e._v("清空")])]),i("ul",[e._l(e.copyerUserList,(function(t,o){return i("li",{key:o+"a"},[i("span",{staticClass:"icon el-icon-user"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.copyerUserList,o)}}})])})),e._l(e.copyerDeptList,(function(t,o){return i("li",{key:o+"b"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.copyerDeptList,o)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.copyerVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyer}},[e._v("确 定")])],1)])],1)]),i("el-drawer",{attrs:{title:"条件设置",visible:e.conditionDrawer,"wrapper-closable":!1,"custom-class":"condition-copyer-drawer",size:"550px","append-to-body":""},on:{"update:visible":function(t){e.conditionDrawer=t}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"condition_content drawer_content"},[i("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.conditionConfig.priorityLevel,callback:function(t){e.$set(e.conditionConfig,"priorityLevel",t)},expression:"conditionConfig.priorityLevel"}},e._l(e.conditionsConfig.conditionNodes.length,(function(e){return i("el-option",{key:e,attrs:{label:"优先级"+e,value:e}})})),1),i("div",{staticClass:"condition_content_box"},[e._l(e.conditionConfig.conditionList,(function(t,o){return i("div",{key:"or"+o,staticClass:"condition_content_or_item"},[i("div",{staticClass:"condition_content_and"},[e._l(t,(function(n,s){return i("div",{key:"and"+s,staticClass:"condition_content_and_item"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:6}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.changeConditionType(t,o,s)}},model:{value:n.id,callback:function(t){e.$set(n,"id",t)},expression:"item.id"}},e._l(e.conditions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.fieldLabel,value:e.id}})})),1)],1),i("el-col",{attrs:{span:6}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:n.canditionSymbol,callback:function(t){e.$set(n,"canditionSymbol",t)},expression:"item.canditionSymbol"}},e._l(n.canditionOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{attrs:{span:10}},["starterUser"===n.fieldType?i("div",{staticClass:"selected_list",on:{click:function(t){return e.addConditionRole(o,s)}}},[n.value&&n.value.length>0?i("span",{key:n.value[0].value},[i("span",{staticClass:"text-name"},[e._v(" "+e._s(n.value[0].label)+" ")]),i("span",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.removeEle(n.value,0)}}})]):e._e(),n.value&&n.value.length>1?i("span",[e._v("+"+e._s(n.value.length-1))]):e._e(),n.value&&n.value.length>0?e._e():i("span",{staticClass:"placeholder"},[e._v("请选择具体人员/角色/部门")])]):"select"===n.component?i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"array"===n.fieldType,"collapse-tags":"",placeholder:"请选择"},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"item.value"}},e._l(n.dictOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):"picker"===n.component?i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"item.value"}}):"number"===n.fieldType?i("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:99999999},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"item.value"}}):i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"item.value"}})],1),i("el-col",{attrs:{span:2}},[i("a",{on:{click:function(i){return e.removeConditionEle(t,o,s)}}},[e._v("删除")])])],1)],1)})),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.addCondition("and",o)}}},[e._v("且条件")])],2),e.conditionConfig.conditionList.length-1>o?i("div",{staticClass:"or-text"},[e._v("或")]):e._e()])})),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.addCondition("or")}}},[e._v("或条件")])],2)],1),i("div",{staticClass:"demo-drawer__footer clearfix"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveCondition}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.conditionDrawer=!1}}},[e._v("取 消")])],1),i("el-dialog",{attrs:{title:"选择成员",visible:e.conditionRoleVisible,width:"600px","close-on-click-modal":!1,"append-to-body":"","custom-class":"set-promoter-dialog"},on:{"update:visible":function(t){e.conditionRoleVisible=t}}},[i("div",{staticClass:"person_body clearfix"},[i("div",{staticClass:"person_tree fl"},[i("el-input",{attrs:{type:"text",size:"mini",placeholder:"搜索成员"},on:{input:function(t){return e.getDebounceData(t,e.activeName)}},model:{value:e.conditionRoleSearchName,callback:function(t){e.conditionRoleSearchName=t},expression:"conditionRoleSearchName"}}),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"人员列表",name:"1"}}),i("el-tab-pane",{attrs:{label:"角色列表",name:"2"}}),i("el-tab-pane",{attrs:{label:"部门列表",name:"3"}})],1),i("div",{staticClass:"person_list"},["1"===e.activeName?i("el-checkbox-group",{model:{value:e.conditionUserChecked,callback:function(t){e.conditionUserChecked=t},expression:"conditionUserChecked"}},e._l(e.userList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.conditionUserList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-user"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e(),"2"===e.activeName?i("el-checkbox-group",{model:{value:e.conditionRoleChecked,callback:function(t){e.conditionRoleChecked=t},expression:"conditionRoleChecked"}},e._l(e.roleList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.conditionRoleList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e(),"3"===e.activeName?i("el-checkbox-group",{model:{value:e.conditionDeptChecked,callback:function(t){e.conditionDeptChecked=t},expression:"conditionDeptChecked"}},e._l(e.deptList,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value},on:{change:function(i){return e.toChecked(e.conditionDeptList,t,"value")}}},[i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"icon el-icon-folder"}),e._v(" "+e._s(t.label)+" ")])])})),1):e._e()],1)],1),i("div",{staticClass:"has_selected fl"},[i("p",{staticClass:"clearfix"},[e._v(" 已选（"+e._s(e.conditionUserList.length+e.conditionRoleList.length+e.conditionDeptList.length)+"） "),i("a",{on:{click:e.emptyCondition}},[e._v("清空")])]),i("ul",[e._l(e.conditionUserList,(function(t,o){return i("li",{key:o+"d"},[i("span",{staticClass:"icon el-icon-user"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.conditionUserList,o)}}})])})),e._l(e.conditionRoleList,(function(t,o){return i("li",{key:o+"e"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.conditionRoleList,o)}}})])})),e._l(e.conditionDeptList,(function(t,o){return i("li",{key:o+"c"},[i("span",{staticClass:"icon el-icon-folder"}),i("span",[e._v(e._s(t.label))]),i("span",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeEle(e.conditionDeptList,o)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.conditionRoleVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureConditionRole}},[e._v("确 定")])],1)])],1)]),e.nodeConfig.childNode&&e.nodeConfig.childNode?i("node-wrap",{attrs:{"node-config":e.nodeConfig.childNode,"is-tried":e.isTried,conditions:e.conditions,"director-max-level":e.directorMaxLevel},on:{"update:nodeConfig":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:node-config":function(t){return e.$set(e.nodeConfig,"childNode",t)},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}):e._e()],1)}),D=[],E=(i("7db0"),i("a15b"),i("4de4"),i("ac1f"),i("1276"),i("a434"),i("25f0"),i("c740"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-node"},[i("div",{staticClass:"add-node-btn"},[i("el-popover",{attrs:{placement:"right-start","popper-class":"add-node-popover"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"add-node-popover-body"},[i("a",{staticClass:"add-node-popover-item approver",on:{click:function(t){return e.addType("approver")}}},[i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"custom-iconfont el-icon-s-check"})]),i("span",[e._v("审批人")])]),i("a",{staticClass:"add-node-popover-item notifier",on:{click:function(t){return e.addType("copy")}}},[i("div",{staticClass:"item-wrapper"},[i("span",{staticClass:"custom-iconfont el-icon-s-promotion"})]),i("span",[e._v("抄送人")])]),i("a",{staticClass:"add-node-popover-item condition",on:{click:function(t){return e.addType("router")}}},[i("div",{staticClass:"item-wrapper"},[i("svg-icon",{attrs:{"icon-class":"tree","class-name":"custom-iconfont"}})],1),i("span",[e._v("条件分支")])])]),i("button",{staticClass:"btn",attrs:{slot:"reference",type:"button"},slot:"reference"},[i("span",{staticClass:"custom-iconfont el-icon-plus"})])])],1)])}),T=[],R={name:"add-node",props:["childNodeP"],data:function(){return{visible:!1}},methods:{addType:function(e){this.visible=!1;var t=null;switch(e){case"approver":t={nodeName:"审核人",error:!0,type:"approver",setType:1,selectMode:0,selectRange:0,directorLevel:1,examineMode:3,noHanderAction:1,examineEndDirectorLevel:0,childNode:this.childNodeP,nodeUserList:[]};break;case"copy":t={nodeName:"抄送人",type:"copy",ccSelfSelectFlag:0,childNode:this.childNodeP,nodeUserList:[]};break;case"router":t={nodeName:"路由",type:"router",childNode:null,conditionNodes:[{nodeName:"条件1",error:!0,type:"condition",priorityLevel:1,conditionList:[[{}]],childNode:this.childNodeP},{nodeName:"条件2",type:"condition",priorityLevel:2,conditionList:[[{}]],childNode:null}]};break;default:t=null;break}this.$emit("update:childNodeP",t)}}},O=R,$=(i("cb43"),Object(l["a"])(O,E,T,!1,null,null,null)),V=$.exports;i("a9e3");function P(e,t){var i;function o(){var o=this,n=arguments;function s(){t.apply(o,n)}clearTimeout(i),i=setTimeout(s,e)}return o}var M={name:"node-wrap",components:{NodeWrap:j,AddNode:V},directives:{focus:{inserted:function(e){e.focus()}}},props:["nodeConfig","conditions","directorMaxLevel","isTried"],inject:["process"],data:function(){return{placeholderList:{start:"发起人",approver:"审核人",copy:"抄送人"},isInputList:[],isInput:!1,activeName:"1",userList:[],deptList:[],roleList:[],promoterDrawer:!1,promoterVisible:!1,startConfig:{},checkedDeptList:[],checkedRoleList:[],checkedUserList:[],promoterSearchName:"",approverDrawer:!1,approverVisible:!1,approverRoleVisible:!1,approverConfig:{},approverSearchName:"",approverUserList:[],approverRoleList:[],copyerDrawer:!1,copyerVisible:!1,copyerConfig:{},copyerSearchName:"",copyerUserList:[],copyerDeptList:[],ccSelfSelectFlag:[],conditionDrawer:!1,conditionConfig:{},conditionsConfig:{conditionNodes:[]},bPriorityLevel:"",orConditionIndex:0,andConditionIndex:0,conditionList:[[{}]],conditionRoleVisible:!1,conditionRoleSearchName:"",conditionUserList:[],conditionRoleList:[],conditionDeptList:[]}},computed:{startTitleStyle:function(){return"background: ".concat(("start"===this.nodeConfig.type?"#576A95":"approver"===this.nodeConfig.type&&"#FF943E")||"copy"===this.nodeConfig.type&&"#3296FA",";")},promoterUserChecked:{get:function(){return this.checkedUserList.map((function(e){return e.value}))},set:function(){}},promoterRoleChecked:{get:function(){return this.checkedRoleList.map((function(e){return e.value}))},set:function(){}},promoterDeptChecked:{get:function(){return this.checkedDeptList.map((function(e){return e.value}))},set:function(){}},approverUserChecked:{get:function(){return this.approverUserList.map((function(e){return e.value}))},set:function(){}},approverRoleChecked:{get:function(){return this.approverRoleList.map((function(e){return e.value}))},set:function(){}},copyerUserChecked:{get:function(){return this.copyerUserList.map((function(e){return e.value}))},set:function(){}},copyerDeptChecked:{get:function(){return this.copyerDeptList.map((function(e){return e.value}))},set:function(){}},conditionUserChecked:{get:function(){return this.conditionUserList.map((function(e){return e.value}))},set:function(){}},conditionRoleChecked:{get:function(){return this.conditionRoleList.map((function(e){return e.value}))},set:function(){}},conditionDeptChecked:{get:function(){return this.conditionDeptList.map((function(e){return e.value}))},set:function(){}}},watch:{nodeConfig:function(){console.log("nodeConfig",this.nodeConfig)},conditions:function(){}},mounted:function(){"approver"===this.nodeConfig.type?this.nodeConfig.error=!this.setApproverStr(this.nodeConfig):"copy"===this.nodeConfig.type?this.nodeConfig.error=!this.copyerStr(this.nodeConfig):"router"===this.nodeConfig.type&&this.conditionCheck()},methods:{clickEvent:function(e){e||0===e?this.$set(this.isInputList,e,!0):"start"!==this.nodeConfig.type&&(this.isInput=!0)},blurEvent:function(e){e||0===e?(this.$set(this.isInputList,e,!1),this.nodeConfig.conditionNodes[e].nodeName=this.nodeConfig.conditionNodes[e].nodeName?this.nodeConfig.conditionNodes[e].nodeName:"条件"):(this.isInput=!1,this.nodeConfig.nodeName=this.nodeConfig.nodeName?this.nodeConfig.nodeName:this.placeholderList[this.nodeConfig.type])},conditionCheck:function(){for(var e=this.nodeConfig.conditionNodes||[],t=0;t<e.length;t++)this.nodeConfig.conditionNodes[t].error="请设置条件"===this.conditionStr(e[t],t)&&t!==e.length-1},conditionStr:function(e,t){var i=e.conditionList;if(0===i.length){var o=this.nodeConfig.conditionNodes||[];return t===o.length-1&&0!==o[0].conditionList.length?"其他条件进入此流程":"请设置条件"}for(var n="",s=0;s<i.length;s++){for(var a=i[s],r=function(e){var t=a[e],i=t.canditionOptions,o=t.canditionSymbol,s=t.component,r=t.dictOptions,l=t.fieldLabel,c=t.fieldType,d=t.value;if(l&&o&&d){var p=i.find((function(e){return e.value===o})),u=p?p.label:"";if("starterUser"===c&&u&&d.length>0){var f=d.map((function(e){return e.label})).join("，");f&&f.length>0&&(n+="<b>".concat(l,"</b> ").concat(u," ").concat(f," <br/>"))}else if("select"===s)if("array"===c&&d.length>0){var h=r.filter((function(e){return-1!==d.indexOf(e.value)})),v=h&&h.length>0?h.map((function(e){return e.label})).join("，"):"";v&&v.length>0&&(n+="<b>".concat(l,"</b>  ").concat(u," ").concat(v," <br/>"))}else{var m=r.find((function(e){return d===e.value})),g=m?m.label:"";g&&g.length>0&&(n+="<b>".concat(l,"</b>  ").concat(u," ").concat(g," <br/>"))}else n+="<b>".concat(l,"</b> ").concat(u," ").concat(d," <br/>")}},l=0;l<a.length;l++)r(l);i.length-1>s&&(n+='<div class="or-text">或</div>')}return n?'<div class="condition-str">'.concat(n.substring(0,n.length-5),"</div>"):"请设置条件"},dealStr:function(e,t){var i=[],o=e.split(","),n=function(e){o.map((function(o){o===e&&i.push(t[e].value)}))};for(var s in t)n(s);return i.join("或")},addConditionRole:function(e,t){this.conditionRoleSearchName="",this.conditionRoleVisible=!0,this.activeName="1",this.getUserList(),this.orConditionIndex=e,this.andConditionIndex=t,this.conditionUserList=[],this.conditionRoleList=[],this.conditionDeptList=[];var i=this.conditionConfig.conditionList,o=i&&i[e]&&i[e][t];if(o&&i[e][t].value&&i[e][t].value.length>0)for(var n=0;n<i[e][t].value.length;n++){var s=i[e][t].value[n];1===s.type?this.conditionUserList.push({type:1,value:s.value,label:s.label}):2===s.type?this.conditionRoleList.push({type:2,value:s.value,label:s.label}):3===s.type&&this.conditionDeptList.push({type:3,value:s.value,label:s.label})}else this.$set(i[e][t],"value",[])},removeConditionEle:function(e,t,i){e.splice(i,1),e.length<1&&this.conditionConfig.conditionList.splice(t,1)},emptyCondition:function(){this.conditionUserList=[],this.conditionRoleList=[],this.conditionDeptList=[]},sureConditionRole:function(){var e=this.conditionConfig.conditionList;if(this.$set(e[this.orConditionIndex][this.andConditionIndex],"value",[]),this.conditionDeptList&&this.conditionDeptList.length>0)for(var t=0;t<this.conditionDeptList.length;t++){var i=this.conditionDeptList[t];i&&e[this.orConditionIndex][this.andConditionIndex].value.push({type:3,value:i.value,label:i.label})}if(this.conditionRoleList&&this.conditionRoleList.length>0)for(var o=0;o<this.conditionRoleList.length;o++){var n=this.conditionRoleList[o];n&&e[this.orConditionIndex][this.andConditionIndex].value.push({type:2,value:n.value,label:n.label})}if(this.conditionUserList&&this.conditionUserList.length>0)for(var s=0;s<this.conditionUserList.length;s++){var a=this.conditionUserList[s];a&&e[this.orConditionIndex][this.andConditionIndex].value.push({type:1,value:a.value,label:a.label})}this.conditionRoleVisible=!1},handleLeaveTypeChange:function(){},addCondition:function(e,t){"and"===e?this.conditionConfig.conditionList[t]&&this.conditionConfig.conditionList[t].length>0?this.conditionConfig.conditionList[t].push({}):this.conditionConfig.conditionList[t]=[{}]:"or"===e&&this.conditionConfig.conditionList.push([{}])},changeConditionType:function(e,t,i){var o=this.conditions.find((function(t){return t.id===e})),n=o?JSON.parse(JSON.stringify(o)):{};this.conditionConfig.conditionList[t]&&this.conditionConfig.conditionList[t].length>0?this.conditionConfig.conditionList[t].splice(i,1,n):this.conditionConfig.conditionList[t]=[{}]},changeOptType:function(){},saveCondition:function(){this.conditionDrawer=!1;var e=this.conditionsConfig.conditionNodes.splice(this.bPriorityLevel-1,1);this.conditionsConfig.conditionNodes.splice(this.conditionConfig.priorityLevel-1,0,e[0]),this.conditionsConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1}));for(var t=0;t<this.conditionsConfig.conditionNodes.length;t++){var i=this.conditionsConfig.conditionNodes[t].conditionList.filter((function(e){var t=e.filter((function(e){return e.fieldLabel&&e.canditionSymbol&&e.value}));return t&&t.length>0}));this.$set(this.conditionsConfig.conditionNodes[t],"conditionList",i),this.conditionsConfig.conditionNodes[t].error="请设置条件"===this.conditionStr(this.conditionsConfig.conditionNodes[t],t)&&t!==this.conditionsConfig.conditionNodes.length-1}this.$emit("update:nodeConfig",this.conditionsConfig)},getDebounceData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=function(){console.log("123",e),t-1===0?this.getUserList({nickName:e}):t-2===0?this.getRoleList({name:e}):this.getDeptList({name:e})};P(3e3,i).call(this)},handleClick:function(){this.promoterSearchName="",this.copyerSearchName="",this.conditionRoleSearchName="",this.activeName-1===0?this.getUserList():this.activeName-2===0?this.getRoleList():this.getDeptList()},addCopyer:function(){this.copyerSearchName="",this.copyerVisible=!0,this.activeName="1",this.getUserList(),this.copyerUserList=[],this.copyerDeptList=[];for(var e=0;e<this.copyerConfig.nodeUserList.length;e++){var t=this.copyerConfig.nodeUserList[e];1===t.type?this.copyerUserList.push({type:1,value:t.value,label:t.label}):3===t.type&&this.copyerDeptList.push({type:3,value:t.value,label:t.label})}},emptyCopyer:function(){this.copyerUserList=[],this.copyerDeptList=[]},sureCopyer:function(){if(this.copyerConfig.nodeUserList=[],this.copyerUserList&&this.copyerUserList.length>0)for(var e=0;e<this.copyerUserList.length;e++){var t=this.copyerUserList[e];t&&this.copyerConfig.nodeUserList.push({type:1,value:t.value,label:t.label})}if(this.copyerDeptList&&this.copyerDeptList.length>0)for(var i=0;i<this.copyerDeptList.length;i++){var o=this.copyerDeptList[i];o&&this.copyerConfig.nodeUserList.push({type:3,value:o.value,label:o.label})}this.copyerVisible=!1},saveCopyer:function(){this.copyerConfig.ccSelfSelectFlag=0===this.ccSelfSelectFlag.length?0:1,this.copyerConfig.error=!this.copyerStr(this.copyerConfig),this.$emit("update:nodeConfig",this.copyerConfig),this.copyerDrawer=!1},copyerStr:function(e){return 0!==e.nodeUserList.length?this.arrToStr(e.nodeUserList):1===e.ccSelfSelectFlag?"发起人自选":void 0},changeModeOrRange:function(){this.approverConfig.nodeUserList=[]},changeType:function(e){switch(this.approverConfig.nodeUserList=[],this.approverConfig.examineMode=3,e){case 1:break;case 2:this.approverConfig.directorLevel=1;break;case 4:this.approverConfig.selectMode=1,this.approverConfig.selectRange=1;break;case 7:this.approverConfig.examineEndDirectorLevel=1;break;default:break}},addApprover:function(){if(this.approverVisible=!0,this.approverSearchName="",this.getUserList(),this.approverUserList=[],this.approverConfig.nodeUserList&&this.approverConfig.nodeUserList.length>0)for(var e=0;e<this.approverConfig.nodeUserList.length;e++){var t=this.approverConfig.nodeUserList[e],i=t.label,o=t.value;this.approverUserList.push({type:1,value:o,label:i})}},addRoleApprover:function(){if(this.approverRoleVisible=!0,this.approverSearchName="",this.getRoleList(),this.approverRoleList=[],this.approverConfig.nodeUserList&&this.approverConfig.nodeUserList.length>0)for(var e=0;e<this.approverConfig.nodeUserList.length;e++){var t=this.approverConfig.nodeUserList[e],i=t.label,o=t.value;this.approverRoleList.push({type:2,value:o,label:i})}},emptyRole:function(){this.approverRoleList=[]},emptyApprover:function(){this.approverUserList=[]},sureApprover:function(){if(this.approverConfig.nodeUserList=[],1===this.approverConfig.setType||4===this.approverConfig.setType&&2===this.approverConfig.selectRange){if(this.approverUserList&&this.approverUserList.length>0)for(var e=0;e<this.approverUserList.length;e++){var t=this.approverUserList[e];t&&this.approverConfig.nodeUserList.push({type:1,value:t.value,label:t.label})}this.approverVisible=!1}else if(4===this.approverConfig.setType&&3===this.approverConfig.selectRange){if(this.approverRoleList&&this.approverRoleList.length>0)for(var i=0;i<this.approverRoleList.length;i++){var o=this.approverRoleList[i];o&&this.approverConfig.nodeUserList.push({type:2,value:o.value,label:o.label})}this.approverRoleVisible=!1}},setApproverStr:function(e){if(1===e.setType){if(1===e.nodeUserList.length)return this.arrToStr(e.nodeUserList);if(e.nodeUserList.length>1){if(1===e.examineMode)return this.arrToStr(e.nodeUserList)+"依次审批";if(2===e.examineMode)return e.nodeUserList.length+"人会签";if(3===e.examineMode)return e.nodeUserList.length+"人或签"}}else if(2===e.setType){var t=1===e.directorLevel?"直接主管":"第"+e.directorLevel+"级主管";if(1===e.examineMode)return t+"依次审批";if(2===e.examineMode)return t+"会签";if(3===e.examineMode)return t+"或签"}else{if(4===e.setType)return 1===e.selectRange?"发起人自选":e.nodeUserList.length>0?"发起人从"+this.arrToStr(e.nodeUserList)+"中自选":"";if(5===e.setType)return"发起人自己";if(7===e.setType)return"从直接主管到通讯录中级别最高的第"+e.examineEndDirectorLevel+"个层级主管"}},saveApprover:function(){this.approverConfig.error=!this.setApproverStr(this.approverConfig),this.$emit("update:nodeConfig",this.approverConfig),this.approverDrawer=!1},addPromoter:function(){if(this.promoterVisible=!0,this.activeName="1",this.getUserList(),this.promoterSearchName="",this.checkedUserList=[],this.checkedRoleList=[],this.checkedDeptList=[],this.startConfig.nodeUserList&&this.startConfig.nodeUserList.length>0)for(var e=0;e<this.startConfig.nodeUserList.length;e++){var t=this.startConfig.nodeUserList[e];1===t.type?this.checkedUserList.push({type:1,value:t.value,label:t.label}):2===t.type?this.checkedRoleList.push({type:2,value:t.value,label:t.label}):3===t.type&&this.checkedDeptList.push({type:3,value:t.value,label:t.label})}},emptyPromoter:function(){this.checkedUserList=[],this.checkedRoleList=[],this.checkedDeptList=[]},surePromoter:function(){if(this.startConfig.nodeUserList=[],this.checkedDeptList&&this.checkedDeptList.length>0)for(var e=0;e<this.checkedDeptList.length;e++){var t=this.checkedDeptList[e];t&&this.startConfig.nodeUserList.push({type:3,value:t.value,label:t.label})}if(this.checkedRoleList&&this.checkedRoleList.length>0)for(var i=0;i<this.checkedRoleList.length;i++){var o=this.checkedRoleList[i];o&&this.startConfig.nodeUserList.push({type:2,value:o.value,label:o.label})}if(this.checkedUserList&&this.checkedUserList.length>0)for(var n=0;n<this.checkedUserList.length;n++){var s=this.checkedUserList[n];s&&this.startConfig.nodeUserList.push({type:1,value:s.value,label:s.label})}this.promoterVisible=!1},savePromoter:function(){this.$emit("update:nodeConfig",this.startConfig),this.promoterDrawer=!1},startStr:function(e){return 0!==e.nodeUserList.length?this.arrToStr(e.nodeUserList):"所有人"},arrToStr:function(e){if(e)return e.map((function(e){return e.label})).toString()},toCheckedOneOrMultiple:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",o=e.findIndex((function(e){return e[i]===t[i]}));1===this.approverConfig.selectMode?(e.splice(0),o<0&&e.push(t)):o<0?e.push(t):e.splice(o,1)},toChecked:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",o=e.findIndex((function(e){return e[i]===t[i]}));o<0?e.push(t):e.splice(o,1)},removeEle:function(e,t){e.splice(t,1)},getUserList:function(e){var t=this;this.process.$emit("fetchUserList",e,(function(e){t.userList=e||[]}))},getRoleList:function(e){var t=this;this.process.$emit("fetchRoleList",e,(function(e){t.roleList=e||[]}))},getDeptList:function(e){var t=this;this.process.$emit("fetchDeptList",e,(function(e){t.deptList=e||[]}))},delNode:function(){this.$emit("update:nodeConfig",this.nodeConfig.childNode)},addTerm:function(){var e=this.nodeConfig.conditionNodes.length+1;this.nodeConfig.conditionNodes.push({nodeName:"条件"+e,type:"condition",priorityLevel:e,conditionList:[[{}]],childNode:null}),this.conditionCheck(),this.$emit("update:nodeConfig",this.nodeConfig)},delTerm:function(e){this.nodeConfig.conditionNodes.splice(e,1),this.conditionCheck(),this.$emit("update:nodeConfig",this.nodeConfig),1===this.nodeConfig.conditionNodes.length&&(this.nodeConfig.childNode&&(this.nodeConfig.conditionNodes[0].childNode?this.reData(this.nodeConfig.conditionNodes[0].childNode,this.nodeConfig.childNode):this.nodeConfig.conditionNodes[0].childNode=this.nodeConfig.childNode),this.$emit("update:nodeConfig",this.nodeConfig.conditionNodes[0].childNode))},reData:function(e,t){e.childNode?this.reData(e.childNode,t):e.childNode=t},setPerson:function(e){var t=this.nodeConfig.type;"start"===t?(this.promoterDrawer=!0,this.startConfig=JSON.parse(JSON.stringify(this.nodeConfig))):"approver"===t?(this.approverDrawer=!0,this.approverConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.approverConfig.setType=this.approverConfig.setType?this.approverConfig.setType:1):"copy"===t?(this.copyerDrawer=!0,this.copyerConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.ccSelfSelectFlag=0===this.copyerConfig.ccSelfSelectFlag?[]:[this.copyerConfig.ccSelfSelectFlag]):(this.conditionDrawer=!0,this.bPriorityLevel=e,this.conditionsConfig=JSON.parse(JSON.stringify(this.nodeConfig)),this.conditionConfig=this.conditionsConfig.conditionNodes[e-1])},arrTransfer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nodeConfig.conditionNodes[e]=this.nodeConfig.conditionNodes.splice(e+t,1,this.nodeConfig.conditionNodes[e])[0],this.nodeConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1})),this.conditionCheck(),this.$emit("update:nodeConfig",this.nodeConfig)}}},A=M,I=(i("7225"),Object(l["a"])(A,U,D,!1,null,null,null)),j=I.exports,z={name:"process-config",components:{NodeWrap:j},props:["tabName","flowKey","conf"],provide:function(){return{process:this}},data:function(){return{isTried:!0,nowVal:100,tipList:[],nodeConfig:{},conditionsList:[],directorMaxLevel:1}},computed:{},watch:{conf:function(e){this.nodeConfig=JSON.parse(JSON.stringify(e))},flowKey:"getConditionsList"},created:function(){this.nodeConfig=JSON.parse(JSON.stringify(this.conf)),this.getConditionsList()},mounted:function(){},methods:{getConditionsList:function(){var e=this;this.$emit("fetchCondition",(function(t){e.conditionsList=t||[]}))},renderErr:function(e){if(e&&e.childNode){if("approver"===e.childNode.type)e.childNode.error&&this.tipList.push({name:e.childNode.nodeName,type:"审核人"}),this.renderErr(e.childNode);else if("copy"===e.childNode.type)e.childNode.error&&this.tipList.push({name:e.childNode.nodeName,type:"抄送人"}),this.renderErr(e.childNode);else if("router"===e.childNode.type){this.renderErr(e.childNode);for(var t=0;t<e.childNode.conditionNodes.length;t++)e.childNode.conditionNodes[t].error&&this.tipList.push({name:e.childNode.conditionNodes[t].nodeName,type:"条件"}),this.renderErr(e.childNode.conditionNodes[t])}}else e.childNode=null},nodeConfigAddEnd:function(e){e&&e.childNode?this.nodeConfigAddEnd(e.childNode):e.childNode={type:"end",pkId:"end",nodeName:"流程结束"}},nodeConfigToString:function(e){var t=this;e&&(e.childNode&&this.nodeConfigToString(e.childNode),e.conditionNodes&&(e.conditionNodes=e.conditionNodes.map((function(e){return t.nodeConfigToString(e.childNode),e.conditionList=e.conditionList?JSON.stringify(e.conditionList):"",e}))))},getData:function(){this.tipList=[];var e=JSON.parse(JSON.stringify(this.nodeConfig));return this.renderErr(e),this.nodeConfigAddEnd(e),this.nodeConfigToString(e),this.tipList.length>0?Promise.reject({target:this.tabName,tipList:this.tipList}):Promise.resolve({formData:e})},zoomSize:function(e){if(1===e){if(50===this.nowVal)return;this.nowVal-=10}else{if(300===this.nowVal)return;this.nowVal+=10}}}},J=z,K=(i("ef6a"),Object(l["a"])(J,x,S,!1,null,null,null)),F=K.exports;F.install=function(e){e.component(F.name,F)};var B=F,G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"basic-setting-warp"},[i("div",{staticClass:"basic-setting"},[i("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-position":"top"}},[i("el-form-item",{attrs:{label:"审批名称",prop:"flowName"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入审批名称",clearable:""},model:{value:e.formData.flowName,callback:function(t){e.$set(e.formData,"flowName",t)},expression:"formData.flowName"}})],1),i("el-form-item",{attrs:{label:"流程类型",prop:"flowKey"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程类型",clearable:""},on:{change:e.flowKeyChange},model:{value:e.formData.flowKey,callback:function(t){e.$set(e.formData,"flowKey",t)},expression:"formData.flowKey"}},e._l(e.flowKeyOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),i("el-form-item",{attrs:{label:"流程分组",prop:"flowGroup"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程分组",clearable:""},model:{value:e.formData.flowGroup,callback:function(t){e.$set(e.formData,"flowGroup",t)},expression:"formData.flowGroup"}},e._l(e.flowGroupOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),i("el-form-item",{attrs:{label:"审批说明",prop:"flowRemark"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入审批说明",maxlength:100,"show-word-limit":"",autosize:{minRows:4,maxRows:4}},model:{value:e.formData.flowRemark,callback:function(t){e.$set(e.formData,"flowRemark",t)},expression:"formData.flowRemark"}})],1)],1)],1)])},H=[],q={name:"basic-setting",components:{},props:["tabName","flowKeyOptions","flowGroupOptions","conf"],data:function(){var e=[];return{dialogVisible:!1,formData:{flowName:"",flowImg:"",flowKey:void 0,flowGroup:void 0,flowRemark:void 0},rules:{flowName:[{required:!0,message:"请输入审批名称",trigger:"blur"}],flowKey:[{required:!0,message:"请选择流程类型",trigger:"change"}]},iconList:e}},computed:{},watch:{conf:function(){this.$refs["elForm"].resetFields(),this.formData=JSON.parse(JSON.stringify(this.conf))}},created:function(){this.formData=JSON.parse(JSON.stringify(this.conf))},methods:{flowKeyChange:function(e){this.$emit("flowKeyChange",e)},getData:function(){var e=this;return new Promise((function(t,i){e.$refs["elForm"].validate((function(o){o?(e.formData.flowImg=e.activeIcon,t({formData:e.formData,target:e.tabName})):i({target:e.tabName})}))}))}}},W=q,Z=(i("e9c7"),Object(l["a"])(W,G,H,!1,null,"236367b2",null)),Q=Z.exports;Q.install=function(e){e.component(Q.name,Q)};var X=Q,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select-user"},[i("div",{staticClass:"selected-user-list"},[e._l(e.selectedEmp,(function(t,o){return i("div",{key:t.value,staticClass:"selected-user-item"},[i("div",{staticClass:"user-portrait"},[e._v(e._s(t.label))]),i("div",{staticClass:"user-name"},[e._v(e._s(t.label))]),i("span",{staticClass:"user-cancel el-icon-close",on:{click:function(i){return e.cancelSelectedEmp(t,o)}}})])})),i("el-button",{attrs:{icon:"el-icon-plus",round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")])],2),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,top:"8vh",width:"760px","append-to-body":"","custom-class":"select-user-dialog","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"select-member-area"},[i("div",{staticClass:"row select-member-panel"},[i("div",{staticClass:"member-all"},[i("div",{staticClass:"member-panel-header"},[i("ul",{staticClass:"modal-tab"},[i("li",{class:{active:1==e.showType},on:{click:function(t){return e.changeSelType(1)}}},[i("a",{attrs:{href:"javascript:;"}},[e._v("团队")])]),i("li",{staticClass:"divider"}),i("li",{class:{active:2==e.showType},on:{click:function(t){return e.changeSelType(2)}}},[i("a",{attrs:{href:"javascript:;"}},[e._v("部门")])])])]),i("div",{staticClass:"member-panel-body"},[i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-area-modal"},[i("i",{staticClass:"iconfont iconsearch"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKey,expression:"searchKey"}],attrs:{type:"text",placeholder:"搜索成员..."},domProps:{value:e.searchKey},on:{change:e.searchBySelType,input:function(t){t.target.composing||(e.searchKey=t.target.value)}}})]),i("a",{staticClass:"btn-action",on:{click:function(t){return t.stopPropagation(),e.selectAll()}}},[e._v("添加全部")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showType,expression:"showType == 1"}]},[i("ul",{staticClass:"member-list"},e._l(e.searchEmp,(function(t){return i("li",{key:t.value,staticClass:"member",on:{click:function(i){return e.selectEmp(t)}}},[t.checked?e._e():[i("div",{staticClass:"lc-avatar",attrs:{member:"member",name:"true",size:"30"}},[i("div",{staticClass:"lc-avatar-30",attrs:{title:t.label}},[i("span",{staticClass:"lc-avatar-def"},[e._v(e._s(t.label))]),i("div",{staticClass:"lc-avatar-name"},[e._v(e._s(t.label))])])])]],2)})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.showType,expression:"showType == 2"}]},[i("ul",{staticClass:"department-list"},[i("li",[i("div",{staticClass:"lvl0",on:{click:function(t){e.rootNodeExpand=!e.rootNodeExpand}}},[i("span",{class:"icon-expand el-icon-caret-right "+(e.rootNodeExpand?"opened":"")}),i("span",{class:"icon-type el-icon-folder"+(e.rootNodeExpand?"-opened":"")}),i("span",{staticClass:"title-warp"},[i("span",{staticClass:"title-name"},[e._v(e._s(e.name))]),i("span",{staticClass:"title-desc"},[e._v("（ "+e._s(e.empOptions.length)+"人 ）")]),i("i",{staticClass:"el-icon-plus",attrs:{title:"添加整个公司成员"},on:{click:function(t){return t.stopPropagation(),e.selectAll()}}})])]),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.rootNodeExpand,expression:"rootNodeExpand"}],staticClass:"lvl-child"},[e._l(e.getChildDept(0),(function(t){return i("child-dept",{key:t.value,attrs:{dept:t,allemp:e.empOptions,alldept:e.deptOptions,lvl:1}})})),e._l(e.getChildEmp(0),(function(t){return i("child-emp",{key:t.value,attrs:{emp:t,allemp:e.empOptions,lvl:1}})}))],2)])])])])]),i("div",{staticClass:"member-arrow"}),i("div",{staticClass:"member-selected"},[i("div",{staticClass:"member-panel-header"},[i("span",[e._v("已选择成员")]),i("span",{staticClass:"header-meta"},[e._v("("+e._s(e.getCheckedEmp().length)+")")])]),i("div",{staticClass:"member-panel-body"},[i("ul",{staticClass:"member-list"},e._l(e.empOptions,(function(t){return i("li",{key:t.value,staticClass:"member"},[t.checked?[i("div",{staticClass:"lc-avatar",attrs:{member:"member",size:"30",name:"true"}},[i("div",{staticClass:"lc-avatar-30",attrs:{title:t.label}},[i("span",{staticClass:"lc-avatar-def"},[e._v(e._s(t.label))]),i("div",{staticClass:"lc-avatar-name"},[e._v(e._s(t.label))])])]),i("span",{staticClass:"btn-link-remove"},[i("i",{staticClass:"el-icon-delete",on:{click:function(i){return e.selectEmp(t)}}})])]:e._e()],2)})),0)])])]),i("div",{staticClass:"member-action"},[i("el-button",{on:{click:e.handleClose}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveData()}}},[e._v("保存")])],1)])])],1)},ee=[],te=i("53ca"),ie=(i("498a"),i("07ac"),i("4c53"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"child-emp",on:{click:function(t){return t.stopPropagation(),e.selectEmp(e.emp)}}},[i("div",{staticClass:"child-emp-item",class:e._f("level")(e.lvl)},[i("el-checkbox",{on:{change:function(){return e.selectEmp(e.emp)}},model:{value:e.emp.checked,callback:function(t){e.$set(e.emp,"checked",t)},expression:"emp.checked"}}),i("div",{staticClass:"lc-avatar",attrs:{member:"member",name:"true",size:"30"}},[i("div",{staticClass:"lc-avatar-30",attrs:{title:e.emp.label}},[i("span",{staticClass:"lc-avatar-def"},[e._v(e._s(e.emp.label))]),i("div",{staticClass:"lc-avatar-name"},[e._v(e._s(e.emp.label))])])])],1)])}),oe=[],ne={name:"child-emp",components:{},filters:{level:function(e){return"lvl"+e}},props:["emp","allemp","lvl"],data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{selectEmp:function(e){"undefined"===typeof e.checked?this.$set(e,"checked",!0):e.checked=!e.checked}}},se=ne,ae=(i("19bb"),Object(l["a"])(se,ie,oe,!1,null,"1f211ccb",null)),re=ae.exports,le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"child-dept"},[i("div",{staticClass:"child-dept-item",class:e._f("level")(e.lvl),on:{click:function(t){return t.stopPropagation(),e.expandDept.apply(null,arguments)}}},[i("span",{class:"icon-expand el-icon-caret-right "+(e.deptExpand?"opened":"")}),i("span",{class:"icon-type el-icon-folder"+(e.deptExpand?"-opened":"")}),i("span",{staticClass:"title-warp"},[i("span",{staticClass:"title-name"},[e._v(e._s(e.dept.label))]),e.dept.emp?i("span",{staticClass:"title-desc"},[e._v("（ "+e._s(e.dept.emp.length)+"人 ）")]):e._e(),i("i",{staticClass:"el-icon-plus",attrs:{title:"添加整个部门成员"},on:{click:function(t){return t.stopPropagation(),e.selectDeptEmp(e.dept)}}})])]),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.deptExpand,expression:"deptExpand"}],staticClass:"lvl-child"},[e._l(e.getChildDept(e.dept.value),(function(t,o){return i("child-dept",{key:e.dept.value+"dept"+o,attrs:{dept:t,allemp:e.allemp,alldept:e.alldept,lvl:e.lvl+1}})})),e._l(e.getChildEmp(e.dept.value),(function(t,o){return i("child-emp",{key:e.dept.value+"emp"+o,attrs:{emp:t,allemp:e.allemp,lvl:e.lvl+1}})}))],2)])},ce=[],de={name:"child-dept",components:{ChildEmp:re},filters:{level:function(e){return"lvl"+e}},props:["dept","allemp","alldept","lvl"],data:function(){return{}},computed:{deptExpand:function(){return"undefined"===typeof this.dept.expand?this.lvl<2:this.dept.expand}},watch:{},created:function(){},mounted:function(){},methods:{selectDeptEmp:function(e){var t=this,i=e.emp;this.allemp&&this.allemp.forEach((function(e){-1!==i.indexOf(e.value)&&("undefined"===typeof e.checked?t.$set(e,"checked",!0):e.checked=!e.checked)}))},getChildEmp:function(e){return this.allemp?this.allemp.filter((function(t){return t.deptId===e})):[]},getAllChildEmp:function(e){var t=[];0!==e&&t.push(e),this.alldept&&this.alldept.forEach((function(i){i.parentId===e&&t.push(i.value)}));var i=[];return this.allemp&&this.allemp.forEach((function(e){t.forEach((function(t){t===e.deptId&&i.push(e.value)}))})),i},getChildDept:function(e){return this.alldept?this.alldept.filter((function(t){return t.parentId===e})):[]},expandDept:function(){"undefined"===typeof this.dept.expand?this.$set(this.dept,"expand",!0):this.dept.expand=!this.dept.expand}}},pe=de,ue=(i("e1d1"),Object(l["a"])(pe,le,ce,!1,null,"00512376",null)),fe=ue.exports,he={name:"select-user",components:{ChildEmp:re,ChildDept:fe},model:{prop:"value",event:"change"},props:{name:{type:String,default:"陕西创鑫商业保理有限公司"},id:String,value:{type:[String,Array,Number],required:!0},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},deptOptions:{type:Array,default:function(){return[]}},empOptions:{type:Array,default:function(){return[]}},multiple:Boolean,multipleLimit:{type:Number,default:0}},data:function(){return{dialogVisible:!1,selectedEmp:[],showType:1,rootNodeExpand:!0,searchKey:""}},computed:{searchEmp:function(){var e=this;return""===this.searchKey.trim()?this.empOptions:this.empOptions.filter((function(t){return-1!==t.label.indexOf(e.searchKey.trim())}))}},watch:{value:{handler:function(){this.resetSelectedEmp()},immediate:!0}},created:function(){},mounted:function(){},methods:{resetSelectedEmp:function(){this.selectedEmp=[];var e=this.value;if(e){var t=Object(te["a"])(e);if("object"===t&&e.length>0)for(var i=0;i<this.empOptions.length;i++){var o=this.empOptions[i];o&&-1!==e.indexOf(o.value)&&(o.checked=!0,this.selectedEmp.push(o))}else if("number"===t||"string"===t)for(var n=0;n<this.empOptions.length;n++){var s=this.empOptions[n];s.checked=!1,s&&s.value===e&&(s.checked=!0,this.selectedEmp.push(s))}else for(var a=0;a<this.empOptions.length;a++){var r=this.empOptions[a];r.checked=!1}}else for(var l=0;l<this.empOptions.length;l++){var c=this.empOptions[l];c.checked=!1}console.log("resetSelectedEmp",this.empOptions,this.selectedEmp)},deptAssembly:function(e,t){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(o[n]||(o[n]=[]),0!==e.value&&0===n&&o[n].push(e.value),t&&t.forEach((function(e){e&&-1!==o[n].indexOf(e.parentId)&&(o[n+1]?o[n+1].push(e.value):o[n+1]=[e.value])})),n++,o[n]&&o[n].length>0)return this.deptAssembly(e,t,o,n);var s=[],a=[];return Object.values(o).map((function(e){e&&e.length>0&&(s=s.concat(e),i.empOptions.forEach((function(t){e.forEach((function(e){e===t.deptId&&a.push(t.value)}))})))})),e.sub=s,e.emp=a,e},changeSelType:function(e){this.showType=e},searchBySelType:function(){},selectEmp:function(e){"undefined"===typeof e.checked?this.$set(e,"checked",!0):e.checked=!e.checked},selectAll:function(){var e=this;this.empOptions.forEach((function(t){"undefined"!==typeof t.checked&&t.checked||e.$set(t,"checked",!0)}))},getParentDept:function(e){return this.deptOptions.filter((function(t){return t.parentId===e}))},getChildDept:function(e){return this.deptOptions.filter((function(t){return t.parentId===e}))},getChildEmp:function(e){return this.empOptions.filter((function(t){return t.deptId===e}))},getCheckedEmp:function(){return this.empOptions.filter((function(e){return e.checked}))},cancelSelectedEmp:function(e,t){for(var i=0;i<this.empOptions.length;i++){var o=this.empOptions[i];if(o&&e&&e.value===o.value){o.checked=!1;break}}this.selectedEmp.splice(t,1);var n=this.selectedEmp.map((function(e){return e.value}));this.multiple?this.$emit("change",n):this.$emit("change",n[0])},saveData:function(){var e=this;this.empOptions.forEach((function(t){t.checked&&e.selectedEmp.push(t)}));var t=this.selectedEmp.map((function(e){return e.value}));this.multiple?this.$emit("change",t):this.$emit("change",t[0]),this.dialogVisible=!1},handleClose:function(){this.dialogVisible=!1}}},ve=he,me=(i("951e"),i("0109"),Object(l["a"])(ve,Y,ee,!1,null,"270c9faa",null)),ge=me.exports;ge.install=function(e){e.component(ge.name,ge)};var Ce=ge,be=[w,B,X,Ce];o["default"].config.productionTip=!1,o["default"].prototype.dispatch=function(e,t,i){var o=this.$parent||this.$root,n=o.$options.componentName;while(o&&(!n||n!==e))o=o.$parent,o&&(n=o.$options.componentName);o&&o.$emit.apply(o,[t].concat(i))};var ye=function(e){be.forEach((function(t){e.use(t)}))};"undefined"!==typeof window&&window.Vue&&ye(window.Vue);var _e={SvgIcon:w,ProcessConfig:B,BasicSetting:X,SelectUser:Ce,install:ye};i("b20f");o["default"].use(C.a,{size:"small",menuType:"text"}),o["default"].use(_e),o["default"].config.productionTip=!1,new o["default"]({router:h,store:m,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";i("9c0c")},"5fb4":function(e,t,i){},7225:function(e,t,i){"use strict";i("7bb6")},"7bb6":function(e,t,i){},"833c":function(e,t,i){},"8ebe":function(e,t,i){},"951e":function(e,t,i){"use strict";i("c55a")},"9c0c":function(e,t,i){},"9edf":function(e,t){!function(e){var t,i,o,n,s,a='<svg><symbol id="icon-wechat" viewBox="0 0 1024 1024"><path d="M405.333333 170.666667C228.693333 170.666667 85.333333 285.44 85.333333 426.666667 85.333333 507.306667 131.413333 578.56 203.946667 625.493333L170.666667 725.333333 277.333333 661.333333C315.306667 674.56 357.12 682.666667 401.493333 682.666667 390.4 655.786667 384 627.2 384 597.333333 384 456.106667 517.546667 341.333333 682.666667 341.333333 690.773333 341.333333 698.88 341.333333 706.56 342.613333 663.04 242.773333 545.28 170.666667 405.333333 170.666667M277.333333 277.333333C300.8 277.333333 320 296.533333 320 320 320 343.466667 300.8 362.666667 277.333333 362.666667 253.866667 362.666667 234.666667 343.466667 234.666667 320 234.666667 296.533333 253.866667 277.333333 277.333333 277.333333M490.666667 277.333333C514.133333 277.333333 533.333333 296.533333 533.333333 320 533.333333 343.466667 514.133333 362.666667 490.666667 362.666667 467.2 362.666667 448 343.466667 448 320 448 296.533333 467.2 277.333333 490.666667 277.333333M682.666667 384C541.44 384 426.666667 479.573333 426.666667 597.333333 426.666667 715.093333 541.44 810.666667 682.666667 810.666667 711.253333 810.666667 738.56 807.253333 764.16 800L853.333333 853.333333 826.88 773.546667C893.866667 734.72 938.666667 670.293333 938.666667 597.333333 938.666667 479.573333 823.893333 384 682.666667 384M597.333333 490.666667C620.8 490.666667 640 509.866667 640 533.333333 640 556.8 620.8 576 597.333333 576 573.866667 576 554.666667 556.8 554.666667 533.333333 554.666667 509.866667 573.866667 490.666667 597.333333 490.666667M768 490.666667C791.466667 490.666667 810.666667 509.866667 810.666667 533.333333 810.666667 556.8 791.466667 576 768 576 744.533333 576 725.333333 556.8 725.333333 533.333333 725.333333 509.866667 744.533333 490.666667 768 490.666667Z"  ></path></symbol><symbol id="icon-tree" viewBox="0 0 1024 1024"><path d="M925.36569226 683.30645373c5.65355182 6.49038291 8.48032773 14.0613978 8.48032773 22.71304551v194.7312518c0 9.3764619-2.8267759 17.13197461-8.48032773 23.2599504-5.65355182 6.1279758-12.56564493 9.19196329-20.72968918 9.19196329H735.00968301c-7.54465842 0-14.14046887-3.06398749-19.79401986-9.19196329-5.65355182-6.1279758-8.48032773-13.88348932-8.48032773-23.25995041V706.01949924c0-5.76556869 1.25195197-11.17531877 3.76903455-16.2226626 2.51708258-5.04734299 5.96983447-9.01405481 10.364845-11.90013382a25.30260901 25.30260901 0 0 1 14.14046804-4.32911811h64.08017578V544.82738245a25.30260901 25.30260901 0 0 0-2.83336523-11.900133 23.51692995 23.51692995 0 0 0-7.53147976-8.6516477 17.88314612 17.88314612 0 0 0-10.36484501-3.2418968h-240.30889482v152.53387976h64.08017579c7.53806909 0 14.13387954 3.2418968 19.79402069 9.73886902 5.65355182 6.49038291 8.48032773 14.0613978 8.48032692 22.71304551v194.7312518c0 5.77215802-1.25854129 11.17531877-3.77562304 16.22925191-2.50390393 5.04734299-5.96324515 9.01405481-10.36484501 11.90013301a25.30260901 25.30260901 0 0 1-14.13387956 4.32252878H432.50513052a25.30260901 25.30260901 0 0 1-14.13387955-4.32252878c-4.40159985-2.886079-8.01249307-6.85279001-10.83926896-11.90013301a32.68253678 32.68253678 0 0 1-4.24345854-16.22925191V706.01949924c0-8.65164771 2.83336523-16.2226626 8.48691705-22.71304551 5.65355182-6.49697223 12.56564493-9.73886902 20.72969001-9.73886902h63.13791631v-152.54046908h-249.73148034c-6.2795278 0-11.46524497 2.3457626-15.54397284 7.03728864-4.08531722 4.68493588-6.1279758 10.2791846-6.12797579 16.76297818v128.74020226h64.0867651c8.16404507 0 14.91799686 3.2418968 20.2552652 9.73886902 5.33726917 6.49038291 8.01249307 14.0613978 8.01249306 22.71304551v194.73125179c0 9.3764619-2.66863458 17.13197461-8.01249306 23.25995041-5.33726917 6.1279758-12.09122094 9.19196329-20.2552652 9.19196329H118.6934744c-3.13646924 0-6.1279758-0.54031641-8.94816239-1.62094839a27.01580631 27.01580631 0 0 1-7.53806909-4.3291181 30.69259194 30.69259194 0 0 1-6.12797581-7.03069849 34.17170114 34.17170114 0 0 1-4.23686919-9.19196411 36.67560507 36.67560507 0 0 1-1.41668262-10.27918461V706.01949924c0-2.87948969 0.31628266-5.76556869 0.94225863-8.65164771a26.02742322 26.02742322 0 0 1 2.82677592-7.57760421c1.25195197-2.1612648 2.8267759-4.32252878 4.71129317-6.48379359 1.88451727-2.16785412 3.76903455-3.966711 5.65355183-5.40975092 1.88451727-1.44962841 4.08531722-2.52367191 6.59581045-3.24848528 2.51708258-0.72481421 5.02757584-1.08063199 7.53806908-1.08063282h64.0867643V496.14621683c0-6.49038291 2.0426586-12.0780423 6.12797579-16.76297901 4.07872788-4.69152522 8.94816238-7.03728781 14.60171421-7.03728781h292.13311816V351.18994128h-63.13791631c-8.1706344 0-15.07613818-3.2418968-20.72969001-9.73227968a33.53913584 33.53913584 0 0 1-8.48032772-22.71963484V123.99359631c0-9.3764619 2.8267759-17.30988391 8.48032772-23.80026682 5.65355182-6.49038291 12.56564493-9.73227969 20.72969001-9.73227886h169.62631923c5.02757584 0 9.73886902 1.62094838 14.13387956 4.86943369a34.06627358 34.06627358 0 0 1 10.36484501 12.44045022c2.51708258 5.04734299 3.77562387 10.4570939 3.77562304 16.22266177v194.73125262c0 8.65164771-2.83336523 16.22925191-8.4803269 22.719634-5.66014115 6.49038291-12.25595159 9.73227969-19.79402071 9.7322797h-64.08017577v121.16918738h281.76827398c6.28611713 0 11.46524497 2.33917328 15.55056217 7.03069931 4.08531722 4.68493588 6.1279758 10.2791846 6.1279758 16.76956751v177.41477856h63.13791714c8.16404507 0 15.07613818 3.2418968 20.72968918 9.73886902z"  ></path></symbol></svg>',r=(r=document.getElementsByTagName("script"))[r.length-1].getAttribute("data-injectcss"),l=function(e,t){t.parentNode.insertBefore(e,t)};if(r&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function c(){s||(s=!0,o())}function d(){try{n.documentElement.doScroll("left")}catch(e){return void setTimeout(d,50)}c()}t=function(){var e,t;(t=document.createElement("div")).innerHTML=a,a=null,(e=t.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",t=e,(e=document.body).firstChild?l(t,e.firstChild):e.appendChild(t))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),t()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(o=t,n=e.document,s=!1,d(),n.onreadystatechange=function(){"complete"==n.readyState&&(n.onreadystatechange=null,c())})}(window)},a694:function(e,t,i){},b20f:function(e,t,i){},c55a:function(e,t,i){},cb43:function(e,t,i){"use strict";i("1136")},e1d1:function(e,t,i){"use strict";i("833c")},e9c7:function(e,t,i){"use strict";i("a694")},ef6a:function(e,t,i){"use strict";i("5fb4")}});